<?xml version="1.0"?>
<!--                                                                                         -->
<!--   <COPYRIGHT_TAG>                                                                       -->
<!--                                                                                         -->

<!--SmallCell UM default cfg-->

<CellConfig>
    <version>24.03</version>
    <!-- unambiguously identify a cell within a PLMN -->
    <cellId>1</cellId>
    <!--  dmrs-TypeA-Position    2 : pos2, 3: pos3 -->
    <nDMRSTypeAPos>2</nDMRSTypeAPos>
    <!--  Physical Cell ID for this carrier -->
    <nPhyCellId>11</nPhyCellId>
    <!--  Carrier bandwidth for DL and UL in MHz Value: 5->400 -->
    <nDLBandwidth>100</nDLBandwidth>
    <nULBandwidth>100</nULBandwidth>
    <!--  absolute Frequency of pointA for DL and UL in KHz Value: 450000->52600000 -->
    <nDLAbsFrePointA>4800720</nDLAbsFrePointA>
    <nULAbsFrePointA>4800720</nULAbsFrePointA>
    <!--  ifft/fft size for DL and UL Value: 512, 1024, 2048, 4096 -->
    <nDLFftSize>4096</nDLFftSize>
    <nULFftSize>4096</nULFftSize>
    <nDLK0>1</nDLK0>
    <nULK0>1</nULK0>
    <!--  Number of transmission antennas -->
    <nNrOfTxAnt>4</nNrOfTxAnt>
    <!--  Number of receiving antennas -->
    <nNrOfRxAnt>4</nNrOfRxAnt>
    <!--  Number of Tx Antenna Vertiacl elements -->
    <TxAntVertical>1</TxAntVertical>
    <!--  Number of Rx Antenna Vertiacl elements -->
    <RxAntVertical>1</RxAntVertical>
    <!--  Max Number of transmission ports (1 - 16) -->
    <nNrOfDLPorts>4</nNrOfDLPorts>
    <!--  Max Number of receiving Virtual ports (1 - 16) -->
    <nNrOfULPorts>4</nNrOfULPorts>
    <!--  Frame Duplex type:  0 -> FDD, 1 -> TDD -->
    <nFrameDuplexType>1</nFrameDuplexType>
    <!--  subCarrierSpacingCommon = numerology, Value: 0 -> 4, 0 : 15kHz, 1: 30kHz, 2: 60khz, 3: 120khz, 4:240khz -->
    <nSubcCommon>1</nSubcCommon>
    <!--  0 for normal, 1 for extended cyclic prefix -->
    <nCyclicPrefix>0</nCyclicPrefix>
    <!--  TDD Period - If nFrameDuplexType = TDD(1), then this config defines the TDD periodicity -->
    <nTddPeriod>5</nTddPeriod>
    <!--  TDD Slot configuration - If nFrameDuplexType = TDD(1), then this config defines the slot config type for each slot. -->
    <slotCfg0>0,0,0,0,0,0,0,0,0,0,0,0,0,0</slotCfg0>
    <slotCfg1>0,0,0,0,0,0,0,0,0,0,0,0,0,0</slotCfg1>
    <slotCfg2>0,0,0,0,0,0,0,0,0,0,0,0,0,0</slotCfg2>
    <slotCfg3>0,0,0,0,0,0,0,0,0,0,0,2,2,1</slotCfg3>
    <slotCfg4>1,1,1,1,1,1,1,1,1,1,1,1,1,1</slotCfg4>
    <prachCfg>
        <!--  PRACH Configuration Index -->
        <nPrachConfIdx>159</nPrachConfIdx>
        <!--  PRACH Subcarrier spacing, only valid for short prach format, should be the same as nSubcCommon. Value:0->3, 0: 15kHz, 1: 30kHz, 2: 60kHz, 3: 120kHz -->
        <nPrachSubcSpacing>1</nPrachSubcSpacing>
        <!--  PRACH zeroCorrelationZoneConfig -->
        <nPrachZeroCorrConf>6</nPrachZeroCorrConf>
        <!--  PRACH restrictedSetConfig -->
        <nPrachRestrictSet>0</nPrachRestrictSet>
        <!--  PRACH Root Sequence Index -->
        <nPrachRootSeqIdx>0</nPrachRootSeqIdx>
        <!--  PRACH prach-frequency-start  (in RBs) -->
        <nPrachFreqStart>19</nPrachFreqStart>
        <!--  PRACH-FDM Range: 1, 2, 4, 8 -->
        <nPrachFdm>1</nPrachFdm>
        <!--  refer to 3gpp 38.331 totalNumberOfRA-Preambles  -->
        <nPrachTotalPreambles>64</nPrachTotalPreambles>
        <!--  PRACH SSB-per-rach-occasion, should larger than the max ssb index from nSSBMask, 0:oneEighth, 1:oneFourth, 2:oneHalf, 3:one, 4:two, 5:four, 6:eight, 7:sixteen -->
        <nPrachSsbRach>3</nPrachSsbRach>
        <!--  refer to 3gpp 38.321 ssb-perRACH-OccasionAndCB-PreamblesPerSSB, currently doesn't support CF preamble, this parameter transparent to UE -->
        <nPreamblesPerSSB>48</nPreamblesPerSSB>
        <nPrachNrofRxRU>2</nPrachNrofRxRU>
        <!--  PRACH Beam Mode: 0:Diabled, 1:SectorBeam, 2:MappingSSBBeam -->
        <PrachBeamMode>0</PrachBeamMode>
        <!--  PRACH Sector Beam ID -->
        <PrachSectorBeamId>0</PrachSectorBeamId>
        <!--  PRACH Beam Id mapped with corresponding SSB Beam -->
        <PrachBeamIdMappingSSB>64,65,66,67,68,69,70,71</PrachBeamIdMappingSSB>
        <!--  ra-ContentionResolutionTimer, unit: subframes, value: sf8, sf16, sf24, sf32, sf40, sf48, sf56, sf64 -->
        <ContentionResolutionTimer>40</ContentionResolutionTimer>
        <!--  preambleReceivedTargetPower, unit: dBm, value: -202..-60 -->
        <preambleReceivedTargetPower>-74</preambleReceivedTargetPower>
    </prachCfg>
    <ssbCfg>
        <!--  Bitmap for actually transmitted SSB -->
        <nSSBMask>1</nSSBMask>
        <!--  SSB block powerValue :1->110000,0.001 dB step, -60 to 50 dBm -->
        <nSSBPwr>0</nSSBPwr>
        <!--  absoluteFrequencySSB in KHz -->
        <nSSBAbsFre>4804320</nSSBAbsFre>
        <!--  SSB periodicity in msec, Value:0->5, 0: ms5,   1: ms10    2: ms20    3: ms40   4: ms80    5: ms160 -->
        <nSSBPeriod>2</nSSBPeriod>
        <!--  SS/PBCH block Subcarrier spacing, Value :0->4, 0: Case A 15kHz, 1: Case B 30kHz, 2: Case C 30kHz, 3: Case D 120kHz, 4: Case E 240kHz -->
        <nSSBSubcSpacing>2</nSSBSubcSpacing>
        <!--  ssb-subcarrierOffset -->
        <nSSBSubcOffset>0</nSSBSubcOffset>
        <!--  ssb-PrbOffset from pointA -->
        <nSSBPrbOffset>0</nSSBPrbOffset>
        <!--  Index of 3GPP 38.213 Table13-11~14, low 4 bits of pdcch-ConfigSIB1 of MIB -->
        <nCSS0>0</nCSS0>
        <!--  Index of 3GPP 38.213 Table13-1~10, high 4 bits of pdcch-ConfigSIB1 of MIB -->
        <nCORESET0>4</nCORESET0>
    </ssbCfg>
    <!-- BWP Ind 1 30mhz 78 RBs 30k scs-->
    <enableBwp>0</enableBwp>
    <Bwp>
        <numBwp>3</numBwp>
        <nActiveBwpInd>1</nActiveBwpInd>
        <bwpInd1>1</bwpInd1>
        <bwpStart1>0</bwpStart1>
        <bwpSize1>100</bwpSize1>
        <bwpInd2>2</bwpInd2>
        <bwpStart2>100</bwpStart2>
        <bwpSize2>106</bwpSize2>
        <bwpSwitchDelay>2</bwpSwitchDelay>
    </Bwp>
    <!--  Number of Symbols for pdcch/coreset, should align with number of symbols coreset0 defined at 3GPP 38.213 Table13-1~10 and indexed by nCORESET0 -->
    <nNumSymPdcch>1</nNumSymPdcch>
    <Coreset>
        <numCoreset>3</numCoreset>
        <!--  Frequency domain resources for the CORESET -->
        <nFrequencyDomainResources1>0x1FFFFFFFFFFF</nFrequencyDomainResources1>
        <!--  CORESET-CCE-to-REG-mapping-type, 0: non-interleaved CCE-to-REG mapping 1: interleaved CCE-to-REG mapping -->
        <nCCEToREGType1>0</nCCEToREGType1>
        <!--  PDCCH-DMRS-Scrambling-ID, 0xFFFF means nPhyCellId is used -->
        <nDmrsScramblingID1>0xFFFF</nDmrsScramblingID1>
        <nFrequencyDomainResources2>0x1FC000000000</nFrequencyDomainResources2>
        <nCCEToREGType2>0</nCCEToREGType2>
        <nDmrsScramblingID2>0xFFFF</nDmrsScramblingID2>
    </Coreset>
    <nNumPdschTimeDomain>4</nNumPdschTimeDomain>
    <!-- sort by symbol length -->
    <nPdschTimeDomainSLIV0>40</nPdschTimeDomainSLIV0>
    <nPdschTimeDomainSLIV1>54</nPdschTimeDomainSLIV1>
    <nPdschTimeDomainSLIV2>68</nPdschTimeDomainSLIV2>
    <nPdschTimeDomainSLIV3>82</nPdschTimeDomainSLIV3>
    <nNumPuschTimeDomain>1</nNumPuschTimeDomain>
    <!-- LongPUCCH -->
    <nPuschTimeDomainSLIV0>27</nPuschTimeDomainSLIV0>
    <!-- ShortPUCCH -->
    <nPuschTimeDomainSLIV1>55</nPuschTimeDomainSLIV1>
    <nPuschTimeDomainIndex>14</nPuschTimeDomainIndex>
    <k2>4</k2>

    <mMIMOCfg>
        <!--nPhyMIMOMode is PHY mimo mode which L2 working with. Corresponding to nMMimoMode in DLSCH PDU of 5G FAPI document --> 
        <!--  0: Traditional MIMO mode, 1: Massive MIMO mode, Beam Weight generated by L1. 2: Massive MIMO mode, Beam Weight generated by L2 -->
        <nPhyMIMOMode>0</nPhyMIMOMode>
        <!--Corresponding to nMatrixBeamID in BeamMatrixStruct of 5G FAPI document, valid when nPhyMIMOMode = 1 or 2,  --> 
        <!-- 0: L1 create beamID with matrix input; 1: use both beamId and matrix input; 2: use beamID only without matrix -->
        <nBeamMatrixType>0</nBeamMatrixType>
        <!-- Whether to enable opposite antenna reference system for beam management -->
        <enableOppositeRefSys>0</enableOppositeRefSys>
        <!-- srs rx count to update beamId by srs coma, value: 1 ~ 255, 0 (infinite) -->
        <nBeamIdUpdatePeriod>0</nBeamIdUpdatePeriod>
        <!-- Feature flag to support PDSCH beam matrix combined with PMI codebook. 0: disabled; 1: enalbed. It can be enabled only when nPhyMIMOMode = 2.  -->
        <actPdschBeamWithPmi>0</actPdschBeamWithPmi>
    </mMIMOCfg>

    <MIMOCfg>
        <DLMIMOCfg>
            <!-- 0:SU 1:ZFS 2:BFS 3:CUS-->
            <nMimoMode>0</nMimoMode>
            <!-- DL SU MIMO Max layer of cell is 4. max 4 layer per UE. DL MU MIMO max layer of cell is 16, max 1 layer per UE-->
            <!--nMaxLayer is max dl layer of cell-->
            <nMaxLayer>4</nMaxLayer>
            <!--nMaxLayerDLPerUE is max dl layer of UE-->
            <nMaxLayerDLPerUE>4</nMaxLayerDLPerUE>
            <nSubBand>18</nSubBand>
        </DLMIMOCfg>

        <ULMIMOCfg>
            <!-- UL SU MIMO Max layer of cell is 2. max 2 layer per UE. UL MU MIMO max layer of cell is 8, max 1 layer per UE-->
            <!--nMaxLayerUL is max ul layer of cell-->
            <nMaxLayerUL>2</nMaxLayerUL>
            <!--nMaxLayerULPerUE is max ul layer of UE-->
            <nMaxLayerULPerUE>2</nMaxLayerULPerUE>
            <!-- 0:SU MiMO 1:MU MIMO -->
            <nMimoModeUL>0</nMimoModeUL>
            <!-- ul resource allocation type. 0: not continuous; 1: continuous. SU MIMO default value is type 1. -->
            <nULAllocType>1</nULAllocType>
        </ULMIMOCfg>
        <!--nMaxPairTrialPerSubbans is max pairing trails per subband, only for cus nMimoMode-->
        <nMaxPairTrialPerSubband>32</nMaxPairTrialPerSubband>
    </MIMOCfg>

    <nUlSchedMode>0</nUlSchedMode>
    <!--0: More scheduled UEs 1: More Throughput-->
    <nRbAlocPref>1</nRbAlocPref>
    <enableDciCheckBeforeUlSch>0</enableDciCheckBeforeUlSch>
    <enableStats>0</enableStats>
    <nMcsTable>1</nMcsTable>
    <nMcsTableUL>0</nMcsTableUL>
    <nMcs>27</nMcs>
    <nMcsUL>27</nMcsUL>
    <numDmrsAddtional>1</numDmrsAddtional>
    <adrForgetFactor>75</adrForgetFactor>
    <enablePucch>1</enablePucch>
    <enableSr>1</enableSr>
    <enableCsi>1</enableCsi>
    <LACfg>
        <enableLA>0</enableLA>
        <!--should be same with dlBlerTarget in uesimcfg.xml-->
        <targetBler>10</targetBler>
        <stepDown>5</stepDown>
    </LACfg>
    <pucchCfg>
        <!-- the max is 160 when u = 1 -->
        <srPeriod>160</srPeriod>
        <!-- pucchConfigCommon: 0~2 for Short PUCCH, 3~13 for Long PUCCH -->
        <pucchConfigCommon>12</pucchConfigCommon>
        <startingPRBPucch0>6</startingPRBPucch0> 
        <startingPRBPucch1>2</startingPRBPucch1>
        <startingPRBPucch2>31</startingPRBPucch2>
        <startingPRBPucch3>3</startingPRBPucch3>
        <nrofPRBsPucch0>24</nrofPRBsPucch0>
        <nrofPRBsPucch2>64</nrofPRBsPucch2>
        <nrofPRBsPucch3>16</nrofPRBsPucch3>
        <!-- {1, 2} -->
        <numPRBsPerResPucch2Set1>2</numPRBsPerResPucch2Set1>
        <nrofSymbolsFormat0>2</nrofSymbolsFormat0>
        <nrofSymbolsFormat2>2</nrofSymbolsFormat2>
        <nrofSymbolsFormat3>7</nrofSymbolsFormat3>
        <!-- {zeroDot08, zeroDot15, zeroDot25, zeroDot35, zeroDot45, zeroDot60, zeroDot80} -->
        <maxCodeRate>1</maxCodeRate>
        <dlDataToULACKList>1,2,3,4,5,6,7,8</dlDataToULACKList>
    </pucchCfg>
    <pdcchCfg>
        <nSearchSpace>5</nSearchSpace>
        <searchSpaceType0>0</searchSpaceType0>
        <searchSpaceType1>1</searchSpaceType1>
        <searchSpaceType2>1</searchSpaceType2>
        <searchSpaceType3>1</searchSpaceType3>
        <searchSpaceType4>1</searchSpaceType4>
        <coreSetId0>0</coreSetId0>
        <coreSetId1>1</coreSetId1>
        <coreSetId2>1</coreSetId2>
        <coreSetId3>1</coreSetId3>
        <coreSetId4>2</coreSetId4>
        <nrofCandidates0>8,6,4,2,1</nrofCandidates0>
        <nrofCandidates1>5,4,4,2,2</nrofCandidates1>
        <nrofCandidates2>6,8,3,1,1</nrofCandidates2>
        <nrofCandidates3>5,6,4,2,1</nrofCandidates3>
        <nrofCandidates4>8,5,2,2,1</nrofCandidates4>
        <dciFormat0>0</dciFormat0>
        <dciFormat1>1</dciFormat1>
        <dciFormat2>1</dciFormat2>
        <dciFormat3>1</dciFormat3>
        <dciFormat4>0</dciFormat4>
    </pdcchCfg>
    <enableSrs>1</enableSrs>
    <srsCfg>
        <srsTransmissionComb>4</srsTransmissionComb>
        <srsMaxNumCsPerCombOffset>6</srsMaxNumCsPerCombOffset>
        <nrofSymbolsSrs>1</nrofSymbolsSrs>
        <nRepetition>1</nRepetition>
        <bSrs>0</bSrs>
        <cSrs>62</cSrs>
        <nShift>0</nShift>
        <nRrc>0</nRrc>
        <nTsrs>320</nTsrs>
        <nResourceUsage>3</nResourceUsage>
        <nStartPos>0</nStartPos>
    </srsCfg>
    <enableCsiRs>1</enableCsiRs>
    <csirsCfg>
        <csirsCat>0</csirsCat>
        <nrofResSet>4</nrofResSet>
        <csirsPeriod0>160</csirsPeriod0>
        <csirsPeriod1>160</csirsPeriod1>
        <csirsPeriod2>160</csirsPeriod2>
        <csirsPeriod3>160</csirsPeriod3>
        <startRb0>0</startRb0>
        <startRb1>0</startRb1>
        <startRb2>0</startRb2>
        <startRb3>0</startRb3>
        <nrofRb0>272</nrofRb0>
        <nrofRb1>272</nrofRb1>
        <nrofRb2>272</nrofRb2>
        <nrofRb3>272</nrofRb3>
        <nrofRes0>1</nrofRes0>
        <nrofRes1>1</nrofRes1>
        <nrofRes2>1</nrofRes2>
        <nrofRes3>1</nrofRes3>
        <csirsOffset0>0</csirsOffset0>
        <csirsOffset1>40</csirsOffset1>
        <csirsOffset2>80</csirsOffset2>
        <csirsOffset3>120</csirsOffset3>
        <nRow0>4</nRow0>
        <nRow1>8</nRow1>
        <nRow2>12</nRow2>
        <nRow3>3</nRow3>
        <kbar0>2</kbar0>
        <kbar1>12</kbar1>
        <kbar2>30</kbar2>
        <kbar3>4</kbar3>
        <!-- sym 12 and 13 for now -->
        <symLZero0>13</symLZero0>
        <symLZero1>12</symLZero1>
        <symLZero2>12</symLZero2>
        <symLZero3>13</symLZero3>
        <nCsirsPortType>2</nCsirsPortType>
        <supportedCsirsPort>2,4,8,16,0,0,0,0</supportedCsirsPort>
        <pdschOverlap>0</pdschOverlap>
    </csirsCfg>
    <!--  UM-0, AM-1  -->
    <enableRlcAm>0</enableRlcAm>
    <rlcAmCfg>
        <snFieldLength>18</snFieldLength>
        <tPollRetransmit>35</tPollRetransmit>
        <pollPdu>32</pollPdu>
        <pollByte>50000</pollByte>
        <maxRetxThreshold>16</maxRetxThreshold>
        <tReassembly>75</tReassembly>
        <tStatusProhibit>50</tStatusProhibit>
        <winSizeSrb>64</winSizeSrb>
        <winSizeDrb>2048</winSizeDrb>
    </rlcAmCfg>
    <!-- 1:enable for UL SU MiMO. 0: diable for UL MU MIMO -->
    <enableUlHarq>1</enableUlHarq>
    <enableDlHarq>1</enableDlHarq>
    <nNumDummyUe>400</nNumDummyUe>
    <nNumDummyUeGbr1>0</nNumDummyUeGbr1>
    <nNumDummyUeGbr2>0</nNumDummyUeGbr2>
    <nNumDummyUeUrllc>0</nNumDummyUeUrllc>
    <nUrllcCapable>0</nUrllcCapable>
    <nUrllcMiniSlotMask>257</nUrllcMiniSlotMask>
    <nUrllcRBStart>224</nUrllcRBStart>
    <gbrCfg>
        <gbrNum>2</gbrNum>    
        <!-- lchId, pbr, bsd, delaytarget-->
        <gbr0>3,4096,100,100</gbr0> 
        <gbr1>4,128,150,150</gbr1> 
    </gbrCfg>    
    <ConfiguredGrant>
        <!-- 0:CG disable, 1:CG type1, 2:CG type2, 3:Mixed CG type-->
        <CGType>3</CGType>
        <!-- unit is symbol in periodicity of 38331-->
        <periodicity>140</periodicity>
        <!-- L of RIV in 6.1.2.2.2 in 38214-->
        <rbSize>3</rbSize>
    </ConfiguredGrant>
    <SemiPersistentScheduling>
        <!-- 0:SPS disable, 1:SPS enable, 2: Mixed SPS -->
        <SPSFlag>2</SPSFlag>
        <!-- unit is ms-->
        <spsperiodicity>10</spsperiodicity>
        <spsrbSize>3</spsrbSize>
    </SemiPersistentScheduling>
    <Cell_Identity>0</Cell_Identity>
    <Global_gNB_ID>0</Global_gNB_ID>
</CellConfig>

